{"version":3,"sources":["webpack://plants_vs_zombies_clone/./src/game.ts","webpack://plants_vs_zombies_clone/./src/lib/Model/Defender.ts","webpack://plants_vs_zombies_clone/./src/lib/Model/Projectile.ts","webpack://plants_vs_zombies_clone/webpack/bootstrap","webpack://plants_vs_zombies_clone/webpack/runtime/global","webpack://plants_vs_zombies_clone/webpack/runtime/publicPath","webpack://plants_vs_zombies_clone/webpack/startup"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["import enemy1SpriteSheet from './assets/sprites/enemy1.png';\r\nimport Defender from './lib/Model/Defender';\r\n\r\nconst canvas = document.querySelector('#canvas');\r\ncanvas.width = 600;\r\ncanvas.height = 400;\r\nconst ctx = canvas.getContext('2d');\r\n\r\nconst cellSize = 50;\r\nlet mouseX = undefined;\r\nlet mouseY = undefined;\r\nlet cells = [];\r\n//let projectiles = [];\r\nconst numOfRows = 7;\r\nlet enemies = [];\r\nlet ressources = 300;\r\n// health of the base. If it falls below 0 the game is lost\r\nlet baseHealth = 500;\r\n// victory points are awarded when an enemy is killed. If enough are reached, the player wins\r\nlet victoryPoints = 0;\r\nlet gameIsRunning = false;\r\n\r\nclass Enemy {\r\n  constructor(y) {\r\n    this.health = 100;\r\n    this.worth = 50;\r\n    this.damage = 20;\r\n    this.y = y;\r\n    this.x = canvas.width;\r\n    this.width = cellSize;\r\n    this.height = cellSize;\r\n    this.speed = 0.5;\r\n    this.isMoving = true;\r\n    this.row = y / cellSize;\r\n    this.victoryPoints = 5;\r\n    this.spriteSheet = new Image();\r\n    this.spriteSheet.src = enemy1SpriteSheet;\r\n    this.frameX = 0;\r\n    this.frameY = 25; // set start frame to the first frame of the walking animation\r\n    this.frameWidth = 258;\r\n    this.frameHeight = 258;\r\n    // first 15 animations have different height - account for that\r\n    this.frameOffset = 2910;\r\n\r\n    // \"metadata\" about the spritesheet. Since it will be different for every spritesheet, we have to connect it somehow\r\n    // to a specific spritesheet. Maybe save it a json and load it together with the corresponding spritesheet?\r\n    this.spriteSheetInfo = {\r\n      width: 258,\r\n      height: 6780,\r\n      animationSets: {\r\n        move: {\r\n          numOfSprites: 5,\r\n          currentSprite: 99, // set a number greater the numOfSprites so that on the first run, we reset it to 0\r\n          startX: 0,\r\n          startY: 5490,\r\n          sizeX: 258,\r\n          sizeY: 258\r\n        }\r\n      }\r\n    };\r\n\r\n    this.animation = null;\r\n  }\r\n\r\n  draw() {\r\n    this.animation = this.spriteSheetInfo.animationSets.move;\r\n    // debounce animation\r\n    if (frames % 10 === 0) {\r\n      // walking animation starts at sprite 25 and ends at sprite 29\r\n      if (this.frameY >= 29) {\r\n        this.frameY = 25;\r\n      } else {\r\n        this.frameY++;\r\n      }\r\n      // new try with animation variable\r\n      // we increment the sprite first and the check if it exceeds the limit. Keep in mind, it is 5 sprites here, but we\r\n      // start at 0! So we actually have indices 0-4. If the index reaches 5, we must reset it to 0.\r\n      // Another option is to keep the if-else structure, but then we need to move this code below the drawImage function!\r\n      // Otherwise this happens: we come in with index 4, which still triggers the else part of the statement. So we increment\r\n      // it to 5 and draw index 5 which is actually too big.\r\n      // We could also subtract -1 from numOfSprites in the if-statement to account for starting at 0. maybe this would be\r\n      // most reasonable.\r\n      this.animation.currentSprite++;\r\n      if (this.animation.currentSprite >= this.animation.numOfSprites) {\r\n        this.animation.currentSprite = 0;\r\n      } else {\r\n        //this.animation.currentSprite++;\r\n      }\r\n      //console.log(this.animation.currentSprite);\r\n    }\r\n\r\n    if (this.isMoving) {\r\n      this.x -= this.speed;\r\n    }\r\n\r\n    //ctx.fillStyle = '#F00';\r\n    //ctx.fillRect(this.x, this.y, cellSize, cellSize);\r\n    /*ctx.drawImage(\r\n      this.spriteSheet,\r\n      this.frameX,\r\n      (this.frameY - 15) * this.frameHeight + this.frameOffset,\r\n      this.frameWidth,\r\n      this.frameHeight,\r\n      this.x,\r\n      this.y,\r\n      this.width,\r\n      this.height\r\n    );*/\r\n    ctx.drawImage(\r\n      this.spriteSheet,\r\n      this.animation.startX,\r\n      this.animation.startY +\r\n        this.animation.currentSprite * this.animation.sizeY,\r\n      this.animation.sizeX,\r\n      this.animation.sizeY,\r\n      this.x,\r\n      this.y,\r\n      this.width,\r\n      this.height\r\n    );\r\n    // draw health info\r\n    ctx.fillStyle = '#000';\r\n    ctx.font = '16px Arial';\r\n    ctx.fillText(this.health, this.x + 10, this.y + 20);\r\n  }\r\n}\r\n\r\nlet once = false; // we used once variable to spawn only one enemy to debug animation\r\nfunction generateEnemies() {\r\n  // we add cellsize to account for the uppermost part of the\r\n  // canvas that is not part of the gamebord\r\n  let randomRow = Math.floor(Math.random() * numOfRows) * cellSize + cellSize;\r\n  if (frames % 150 === 0 && once === false) {\r\n    enemies.push(new Enemy(randomRow));\r\n    //once = true;\r\n  }\r\n}\r\n\r\nfunction drawEnemies() {\r\n  enemies.forEach(enemy => {\r\n    enemy.draw();\r\n  });\r\n}\r\n\r\nfunction handleEnemies() {\r\n  // if an enemy leaves the board, damage the base and\r\n  // remove him from the enemies array\r\n  for (let i = 0; i < enemies.length; i++) {\r\n    enemies[i].isMoving = true;\r\n    // remove dead enemies and grant ressources\r\n    if (enemies[i].health <= 0) {\r\n      ressources += enemies[i].worth;\r\n      victoryPoints += enemies[i].victoryPoints;\r\n      enemies.splice(i, 1);\r\n      i--;\r\n      continue;\r\n    }\r\n\r\n    if (enemies[i].x < 0 - cellSize) {\r\n      // damage the base\r\n      baseHealth -= enemies[i].damage;\r\n      // remove enemy from the array\r\n      enemies.splice(i, 1);\r\n      // decrement i because array gets shorter\r\n      // in practice this should be nigh irrelevant because though\r\n      // it prevents \"jumping\" over the next array element, both\r\n      // elements would need to be outside the gameboard on the\r\n      // exact same frame\r\n      i--;\r\n    }\r\n  }\r\n}\r\n\r\nclass Cell {\r\n  constructor(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = cellSize;\r\n    this.height = cellSize;\r\n    this.defender = null;\r\n    this.row = y / cellSize;\r\n  }\r\n\r\n  isHoverdOver(x, y) {\r\n    return (\r\n      this.x < x &&\r\n      this.x + this.width > x &&\r\n      this.y < y &&\r\n      this.y + this.height > y\r\n    );\r\n  }\r\n}\r\n\r\n// create the cell objects\r\nfunction createCells() {\r\n  for (let x = 0; x < canvas.width; x += cellSize) {\r\n    for (let y = cellSize; y < canvas.height; y += cellSize) {\r\n      let cell = new Cell(x, y);\r\n      cells.push(cell);\r\n    }\r\n  }\r\n}\r\n\r\n// TODO: naming of the function is not good. It actually defines mouse position, not highlighting it!\r\nfunction highlightMouseCell(e) {\r\n  // only perform this action every 2 frames (primitive debounce).\r\n  if (frames % 2 === 0) {\r\n    // console.log(e);\r\n    // console.log(canvas);\r\n\r\n    // if the mouse is not inside the canvas, return\r\n    if (\r\n      e.clientX - canvas.offsetLeft < 0 || // left\r\n      e.clientX - canvas.offsetLeft > canvas.width || // right\r\n      e.clientY - canvas.offsetTop < 0 || // top\r\n      e.clientY - canvas.offsetTop > canvas.height // bottom\r\n    ) {\r\n      mouseX = undefined;\r\n      mouseY = undefined;\r\n      return;\r\n    }\r\n    mouseX = e.clientX - canvas.offsetLeft;\r\n    mouseY = e.clientY - canvas.offsetTop;\r\n\r\n    // console.log('mouseX: ' + mouseX);\r\n    // console.log('mouseY: ' + mouseY);\r\n  }\r\n}\r\n\r\n// TODO: we can simply loop over the cells array - no need for nested for-loop!\r\nfunction drawGrid() {\r\n  ctx.strokeStyle = '#000';\r\n  for (let x = 0; x < canvas.width; x += cellSize) {\r\n    for (let y = cellSize; y < canvas.height; y += cellSize) {\r\n      // highlight the cell with the cursor\r\n      if (\r\n        mouseX &&\r\n        mouseX > x &&\r\n        mouseX < x + cellSize &&\r\n        mouseY &&\r\n        mouseY > y &&\r\n        mouseY < y + cellSize\r\n      ) {\r\n        ctx.strokeStyle = '#0F0';\r\n        ctx.beginPath();\r\n        ctx.rect(x, y, cellSize, cellSize);\r\n        ctx.stroke();\r\n        ctx.strokeStyle = '#000';\r\n      }\r\n      // we can use this later if we want to toggle grid on/off\r\n      else {\r\n        ctx.beginPath();\r\n        ctx.rect(x, y, cellSize, cellSize);\r\n        ctx.stroke();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// actually, we could check when the cells are drawn if the cell has a defender and then handle him.\r\nfunction drawDefenders() {\r\n  let cellsWithDefenders = cells.filter(cell => cell.defender !== null);\r\n  cellsWithDefenders.forEach(cell => {\r\n    // if defender health is 0 or below, remove him\r\n    if (cell.defender.health <= 0) {\r\n      cell.defender = null;\r\n      return;\r\n    }\r\n    cell.defender.draw();\r\n    if (detectEnemiesOnRow(cell.defender.row) && frames % 150 == 0)\r\n      cell.defender.shoot();\r\n  });\r\n}\r\n\r\nfunction handleProjectiles() {\r\n  const defenders = getDefendersArray();\r\n  defenders.forEach(defender => {\r\n    for (let i = 0; i < defender.projectiles.length; i++) {\r\n      defender.projectiles[i].draw();\r\n\r\n      // if the projectile goes off screen, remove it\r\n      if (defender.projectiles[i].x > canvas.width) {\r\n        defender.projectiles.splice(i, 1);\r\n        i--;\r\n        continue;\r\n      }\r\n\r\n      // we use every here, because we cannot break out of forEach once we found a collision\r\n      enemies.every(enemy => {\r\n        if (\r\n          defender.projectiles[i].x + defender.projectiles[i].width >=\r\n            enemy.x &&\r\n          defender.projectiles[i].row === enemy.row\r\n        ) {\r\n          enemy.health -= defender.projectiles[i].damage;\r\n          defender.projectiles.splice(i, 1);\r\n          i--;\r\n          // return false to break out of every\r\n          return false;\r\n        }\r\n        // return true to keep the loop going\r\n        return true;\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nfunction placeDefender(e) {\r\n  if (!gameIsRunning) {\r\n    return;\r\n  }\r\n\r\n  let activeCellArr = cells.filter(cell => cell.isHoverdOver(mouseX, mouseY));\r\n  if (activeCellArr.length !== 1) return;\r\n\r\n  let activeCell = activeCellArr[0];\r\n\r\n  if (activeCell.defender) {\r\n    console.log('there is already a defender on this tile');\r\n    return;\r\n  }\r\n\r\n  // check if we can afford the defender\r\n  if (ressources - Defender.cost < 0) {\r\n    console.log('not enough ressources');\r\n    return;\r\n  }\r\n\r\n  // make sure that there is no enemy on the tile\r\n  let enemyAtTheGates = enemies.filter(enemy => {\r\n    return detectRowBasedCollision(activeCell, enemy);\r\n  });\r\n  if (enemyAtTheGates.length > 0) {\r\n    console.log('you cannot place defenders on tiles with enemies!');\r\n    return;\r\n  }\r\n\r\n  activeCell.defender = new Defender(\r\n    activeCell.x,\r\n    activeCell.y,\r\n    activeCell.width,\r\n    activeCell.height,\r\n    cellSize,\r\n    ctx\r\n  );\r\n  ressources -= Defender.cost;\r\n\r\n  console.log(activeCell);\r\n}\r\n\r\n/** Helper that returns an array of defender objects. */\r\nfunction getDefendersArray() {\r\n  return cells.reduce(function(defendersArr, cell) {\r\n    if (cell.defender !== null) {\r\n      defendersArr.push(cell.defender);\r\n    }\r\n    return defendersArr;\r\n  }, []);\r\n}\r\n\r\n/** Helper that detects if there are enemies on the defender's row */\r\nfunction detectEnemiesOnRow(row) {\r\n  return enemies.some(enemy => enemy.row === row);\r\n}\r\n\r\n// this function draws all the info about game state\r\nfunction drawGameInfo() {\r\n  ctx.fillStyle = '#000';\r\n  ctx.font = '20px Arial';\r\n  ctx.fillText('Ressources: ' + ressources, 10, 30);\r\n  ctx.fillText('Health of base: ' + baseHealth, 200, 30);\r\n  ctx.fillText('Victory Points: ' + victoryPoints, 420, 30);\r\n}\r\n\r\n// handle collision detection between defenders and enemies\r\nfunction detectRowBasedCollision(defender, enemy) {\r\n  return (\r\n    defender.x + defender.width >= enemy.x &&\r\n    // without this condition, it would not be able to place\r\n    // defenders to the right of enemies\r\n    defender.x < enemy.x + enemy.width &&\r\n    defender.row === enemy.row\r\n  );\r\n}\r\n\r\nfunction handleCollisions() {\r\n  let defenders = getDefendersArray();\r\n\r\n  if (defenders.length >= 1) {\r\n    defenders.forEach(defender => {\r\n      enemies.forEach(enemy => {\r\n        if (detectRowBasedCollision(defender, enemy)) {\r\n          // stop the enemy from moving\r\n          enemy.isMoving = false;\r\n          // reduce the health of the defender\r\n          // (debounce it a bit because it is very fast)\r\n          if (frames % 5 === 0) defender.health -= 1;\r\n          // if the defender is dead, start moving again.\r\n          // defenders are removed in drawDefenders function\r\n          if (defender.health <= 0) enemy.isMoving = true;\r\n        }\r\n      });\r\n    });\r\n  } else {\r\n    // if there are no defenders, make sure all enemies are moving\r\n    enemies.forEach(enemy => (enemy.isMoving = true));\r\n  }\r\n}\r\n\r\nfunction restartGame(e) {\r\n  // check if we clicked on the button\r\n  if (\r\n    !gameIsRunning &&\r\n    e.clientX >= canvas.width / 2 - 60 &&\r\n    e.clientX <= canvas.width / 2 + 60 &&\r\n    e.clientY >= canvas.height / 2 + 80 &&\r\n    e.clientY <= canvas.height / 2 + 120\r\n  ) {\r\n    gameIsRunning = true;\r\n    // reset the ctx text properties to their default\r\n    ctx.textBaseline = 'alphabetic';\r\n    ctx.textAlign = 'start';\r\n    // reset game variables\r\n    frames = 0;\r\n    enemies = [];\r\n    ressources = 300;\r\n    baseHealth = 500;\r\n    victoryPoints = 0;\r\n    cells = [];\r\n    //projectiles = [];\r\n    gameLoop();\r\n    createCells();\r\n  }\r\n}\r\n\r\nlet frames = 0;\r\n\r\nfunction gameLoop() {\r\n  // check if game is won or lost\r\n  if (baseHealth <= 0) {\r\n    gameIsRunning = false;\r\n    ctx.fillStyle = 'rgba(0,0,0,.5)';\r\n    ctx.fillRect(0, 0, 600, 400);\r\n    ctx.fillStyle = '#FFF';\r\n    ctx.font = '30px Arial';\r\n    // center the text\r\n    ctx.textBaseline = 'middle';\r\n    ctx.textAlign = 'center';\r\n\r\n    ctx.fillText(\r\n      'The enemies destroyed the base.',\r\n      canvas.width / 2,\r\n      canvas.height / 2 + 20\r\n    );\r\n    ctx.fillText('The game is lost!', canvas.width / 2, canvas.height / 2 - 20);\r\n    // draw restart button\r\n    ctx.fillStyle = '#FFF';\r\n    ctx.fillRect(canvas.width / 2 - 60, canvas.height / 2 + 80, 120, 40);\r\n    ctx.fillStyle = '#000';\r\n    ctx.font = '20px Arial';\r\n    ctx.fillText('PLAY AGAIN', canvas.width / 2, canvas.height / 2 + 100);\r\n    return;\r\n  } else if (victoryPoints >= 100) {\r\n    gameIsRunning = false;\r\n    ctx.fillStyle = 'rgba(0,0,0,.5)';\r\n    ctx.fillRect(0, 0, 600, 400);\r\n    ctx.fillStyle = '#FFF';\r\n    ctx.font = '30px Arial';\r\n    ctx.textBaseline = 'middle';\r\n    ctx.textAlign = 'center';\r\n    ctx.fillText(\r\n      'The enemy forces suffered heavy losses',\r\n      canvas.width / 2,\r\n      canvas.height / 2 - 40\r\n    );\r\n    ctx.fillText('and are retreating.', canvas.width / 2, canvas.height / 2);\r\n    ctx.fillText(\r\n      'You are victorious!',\r\n      canvas.width / 2,\r\n      canvas.height / 2 + 40\r\n    );\r\n    // draw restart button\r\n    ctx.fillStyle = '#FFF';\r\n    ctx.fillRect(canvas.width / 2 - 60, canvas.height / 2 + 80, 120, 40);\r\n    ctx.fillStyle = '#000';\r\n    ctx.font = '20px Arial';\r\n    ctx.fillText('PLAY AGAIN', canvas.width / 2, canvas.height / 2 + 100);\r\n\r\n    return;\r\n  }\r\n\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n  drawGrid();\r\n  drawDefenders();\r\n  handleProjectiles();\r\n\r\n  generateEnemies();\r\n  handleEnemies();\r\n  handleCollisions();\r\n  drawEnemies();\r\n  drawGameInfo();\r\n\r\n  frames++;\r\n\r\n  requestAnimationFrame(gameLoop);\r\n}\r\n\r\n//gameLoop();\r\n// create the cells once.\r\n//createCells();\r\n\r\n// draw the start screen\r\nctx.fillStyle = 'rgba(0,0,0,.5)';\r\nctx.fillRect(0, 0, 600, 400);\r\nctx.fillStyle = '#FFF';\r\nctx.font = '30px Arial';\r\nctx.textBaseline = 'middle';\r\nctx.textAlign = 'center';\r\nctx.fillText(\r\n  'Enemies are attacking our base!',\r\n  canvas.width / 2,\r\n  canvas.height / 2 - 40\r\n);\r\nctx.font = '20px Arial';\r\nctx.fillText(\r\n  'Place defenders with the mouse to defend the base.',\r\n  canvas.width / 2,\r\n  canvas.height / 2\r\n);\r\n// draw restart button\r\nctx.fillStyle = '#FFF';\r\nctx.fillRect(canvas.width / 2 - 60, canvas.height / 2 + 80, 120, 40);\r\nctx.fillStyle = '#000';\r\nctx.font = '20px Arial';\r\nctx.fillText('START', canvas.width / 2, canvas.height / 2 + 100);\r\n\r\ndocument.addEventListener('mousemove', highlightMouseCell);\r\ndocument.addEventListener('click', placeDefender);\r\ndocument.addEventListener('click', restartGame);\r\n","import Projectile from './Projectile';\r\n\r\nexport default class Defender implements GameObjectInterface {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  row: number;\r\n  static cost = 100;\r\n  /** Reference to the drawing context */\r\n  ctx: CanvasRenderingContext2D;\r\n  /** Array holding the projectiles of this defender */\r\n  projectiles: Projectile[];\r\n\r\n  constructor(x, y, width, height, cellSize, ctx) {\r\n    this.health = 100;\r\n    this.damage = 20;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.row = y / cellSize;\r\n    this.ctx = ctx;\r\n    this.projectiles = [];\r\n  }\r\n\r\n  draw() {\r\n    this.ctx.fillStyle = '#00F';\r\n    this.ctx.fillRect(this.x, this.y, this.width, this.height);\r\n    // draw health info\r\n    this.ctx.fillStyle = '#000';\r\n    this.ctx.font = '16px Arial';\r\n    this.ctx.fillText(this.health, this.x + 10, this.y + 30);\r\n  }\r\n\r\n  shoot() {\r\n    this.projectiles.push(\r\n      new Projectile(this.x, this.y, this.damage, this.row, this.ctx)\r\n    );\r\n  }\r\n}\r\n","export default class Projectile implements GameObjectInterface {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  row: number;\r\n  /** Reference to the drawing context */\r\n  ctx: CanvasRenderingContext2D;\r\n\r\n  constructor(x, y, damage, row, ctx) {\r\n    this.damage = damage;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = 20;\r\n    this.height = 20;\r\n    this.row = row;\r\n    this.speed = 0.5;\r\n    this.ctx = ctx;\r\n  }\r\n\r\n  draw() {\r\n    this.x += this.speed;\r\n    this.ctx.fillStyle = '#FF0';\r\n    this.ctx.fillRect(\r\n      this.x + this.width / 2,\r\n      this.y + this.height / 2,\r\n      this.width,\r\n      this.height\r\n    );\r\n  }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/game.ts\");\n"],"sourceRoot":""}